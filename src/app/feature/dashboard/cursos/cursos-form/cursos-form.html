<mat-card>
  <mat-card-title>
    {{ isEditing ? 'Editar Curso' : 'Crear Nuevo Curso' }}
  </mat-card-title>
  
  <mat-card-content>
    <form [formGroup]="createForm" (ngSubmit)="onSubmit()" class="course-form">
      
      @if (isEditing) {
        <mat-form-field appearance="outline">
          <mat-label>ID</mat-label>
          <input matInput formControlName="id" readonly />
        </mat-form-field>
      }

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Título</mat-label>
        <input matInput formControlName="nombre" placeholder="Ej. Curso de Angular Avanzado" />
        <mat-icon matSuffix>title</mat-icon>
        <mat-error>{{ getError('nombre') }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Descripción</mat-label>
        <textarea matInput formControlName="descripcion" placeholder="Describe el contenido del curso..."></textarea>
        <mat-icon matSuffix>description</mat-icon>
        <mat-error>{{ getError('descripcion') }}</mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Fecha de inicio - Fecha de fin</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate formControlName="fechaInicio" placeholder="Fecha de inicio" />
          <input matEndDate formControlName="fechaFin" placeholder="Fecha de fin" />
        </mat-date-range-input>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
        <mat-error *ngIf="createForm.get('fechaInicio')?.hasError('required') || createForm.get('fechaFin')?.hasError('required')">
          Ambas fechas son requeridas.
        </mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Estado</mat-label>
        <mat-select formControlName="estado">
          <mat-option value="ACTIVO">Activo</mat-option>
          <mat-option value="INACTIVO">Inactivo</mat-option>
        </mat-select>
        <mat-icon matSuffix>toggle_on</mat-icon>
      </mat-form-field>

    </form>
  </mat-card-content>
  
  <mat-card-actions align="end">
    <button mat-flat-button color="warn" mat-dialog-close>Cancelar</button>
    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      [disabled]="createForm.invalid"
    >
      Guardar
    </button>
  </mat-card-actions>
</mat-card>